<breadcrumbs crumbs=crumbs></breadcrumbs>

<h1>
  Credentials
  <img ng-show='loading > 0' src='/static/img/spinner-blue-on-white.gif'>
</h1>

<p>
  Manage the credentials that QuickPin uses for extracting data from
  social media sites.
</p>

<div class='alert alert-danger' role='alert' ng-show='error != null'>
  {{error}}
</div>

<table ng-show='credentials != null' class='table table-striped'>
  <thead>
    <tr>
      <th>Site</th>
      <th>Public</th>
      <th>Secret</th>
      <th width='15%'>&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-if='credentials.length == 0'>
      <td colspan='100' class='no-rows'>No credentials found.</td>
    </tr>

    <tr ng-repeat='site in sites'>
      <td>
        {{site}}
      </td>
      <td>
        <edit-text text='credentials[site]["public"]'
                   onsave='credentials[site]["savePublic"]'
                   size='20'></edit-text>
      </td>
      <td>
        <edit-text text='credentials[site]["secret"]'
                   onsave='credentials[site]["saveSecret"]'
                   size='20'></edit-text>
      </td>
      <td>
        <button class='btn btn-danger btn-xs delete'
                ng-click='deleteCredential(site)'>
          <i class='fa fa-trash-o'></i> Delete
        </button>
      </td>
    </tr>

    <tr ng-if='availableSites.length > 0 && !showAdd'>
      <td colspan='100'>
        <a ng-click='showAdd=true'>Add Credentialâ€¦</button>
      </td>
    </tr>

    <tr class='no-rows' ng-if='availableSites.length == 0 && !showAdd'>
      <td colspan='100'>
        <p>No more credentials to add!</p>
      </td>
    </tr>

    <tr ng-if='showAdd'>
      <td>
        <select ng-model='newSite'>
          <option ng-repeat='site in availableSites' ng-value='site'>
            {{site}}
          </option>
        </select>
      </td>
      <td>
        <input placeholder='New public credential' ng-model='newPublic'>
      </td>
      <td>
        <input placeholder='New private credential' ng-model='newSecret'>
        <div class='addButtons'>
          <button class='btn btn-success btn-sm' ng-click='addCredential()'>
            <i class='fa fa-floppy-o'></i> Save
          </button>
          <button class='btn btn-danger btn-sm' ng-click='cancelAdd()'>
            <i class='fa fa-trash-o'></i> Cancel
          </button>
        </div>
      </td>
    </tr>
  </tbody>
</table>
