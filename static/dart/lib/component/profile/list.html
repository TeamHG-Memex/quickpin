<breadcrumbs crumbs=crumbs></breadcrumbs>

<div class='buttons'>
  <div class='btn-group pull-right'>
    <button type='button'
            class='btn btn-primary btn-sm dropdown-toggle'
            data-toggle='dropdown'
            aria-expanded='false'>
      Interest: All Profiles <span class='caret'></span>
    </button>
    <ul class='dropdown-menu sort-by' role='menu'>
      <li><a click=''>All Profiles</a></li>
      <li class='divider'></li>
      <li><a lick=''>Interesting</a></li>
      <li><a lick=''>Not Interesting</a></li>
      <li><a lick=''>Uncategorized</a></li>
    </ul>
  </div>

  <div class='btn-group pull-right'>
    <button type='button'
            class='btn btn-primary btn-sm dropdown-toggle'
            data-toggle='dropdown'
            aria-expanded='false'>
      Site: All Sites <span class='caret'></span>
    </button>
    <ul class='dropdown-menu sort-by' role='menu'>
      <li><a click=''>All Sites</a></li>
      <li class='divider'></li>
      <li><a lick=''>Instagram</a></li>
      <li><a lick=''>Twitter</a></li>
    </ul>
  </div>

  <div class='btn-group pull-right'>
    <a class='btn btn-primary btn-sm pull-right'
       ng-disabled='showAdd'
       ng-click='showAddDialog()'>
      <i class='fa fa-user-plus'></i>
      Add Profiles
    </a>
  </div>
</div>

<h1>
  Profiles
  <img ng-show='loading' src='/static/img/spinner-blue-on-white.gif'>
</h1>

<div class='alert alert-danger' role='alert' ng-show='error != null'>
  {{error}}
</div>

<form ng-show='showAdd' class='form-inline add-profile-form'>
  <div class='form-group'>
    <div class='input-group'>
      <div class='input-group-addon'><strong>Add Profile</strong></div>
      <input type='text'
             id='newProfile'
             class='form-control'
             ng-model='newProfile'
             ng-keypress='handleAddProfileKeypress($event)'
             ng-disabled='submittingProfile'
             placeholder='Enter a username and select a site.'>
    </div>
  </div>

  <div class='btn-group'>
    <button type='button'
            class='btn btn-default dropdown-toggle'
            data-toggle='dropdown'
            ng-disabled='submittingProfile'
            aria-expanded='false'>
      On Twitter <span class='caret'></span>
    </button>
    <ul class='dropdown-menu sort-by' role='menu'>
      <li><a ng-click=''>Instagram</a></li>
      <li><a ng-click=''>Twitter</a></li>
    </ul>
  </div>

  <button class='btn btn-success'
          ng-click='addProfile()'
          ng-disabled='submittingProfile'>
    <i class='fa fa-user-plus'></i>
    Add
  </button>

  <button class='btn btn-danger'
          ng-click='hideAddDialog()'
          ng-disabled='submittingProfile'>
    <i class='fa fa-times'></i>
    Cancel
  </button>
</form>

<masonry column-width='250' column-gap='25'>
  <div ng-repeat='profile in profiles' class='masonry-item'>
    <a ng-href='{{profile.id != null ? "/profile/" + profile.id : ""}}'>
      <img class='avatar' ng-src='{{api.authorizeUrl(profile.avatarUrl)}}'>
    </a>
    <p class='profile-name'>
      <a ng-show='profile.id != null' href='/profile/{{profile.id}}'>
        {{profile.username}}
      </a>
      <span ng-show='profile.id == null'>
        {{profile.username}}
      </span>
      <span class='site-name'>
        <i class='fa {{profile.iconClass()}}' title='{{profile.siteName}}'></i>
      </span>
    </p>
    <div class='loading'
         ng-show='profile.id == null && profile.error == null'>
      <img src='/static/img/horizontal-loader.gif' alt='Loading…'><br>
      <em>Loading…</em>
    </div>
    <p class='alert alert-danger alert-dismissible'
       role='alert'
       ng-show='profile.error != null'>
      <button type='button'
              class='close'
              data-dismiss='alert'
              aria-label='Close'
              ng-click='dismissProfileAtIndex($index)'>
      <span aria-hidden='true'>&times;</span></button>
      <strong>Error:</strong> {{profile.error}}
    </p>
    <p ng-show='profile.description != null'>
      {{profile.description}}
    </p>
    <div class='info' ng-show='profile.location != null'>
      <strong class='text-muted'>Name:</strong>
      {{profile.name}}
    </div>
    <div class='info' ng-show='profile.location != null'>
      <strong class='text-muted'>Location:</strong>
      {{profile.location}}
    </div>
    <p ng-show='profile.postCount != null'>
      <em>
        {{profile.friendCount | largeNumber:1}} friends,
        {{profile.followerCount | largeNumber:1}} followers, and
        {{profile.postCount | largeNumber:1}} posts.
      </em>
    </p>
  </div>
</masonry>

<p ng-show='profiles.length == 0'>
  There are currently no profiles. Try clicking "Add Profiles" to get started.
</p>
